gsub(" ", "", filer_office) == filer_office ~ office_last_name,
TRUE ~ str_squish(str_extract(filer_office, "^[^\\s]+"))
))
clean_2008 <- cleaned_filings_most %>%
filter(year(source) == 2008) %>%
mutate(office_last_name = case_when(
gsub(" ", "", filer_office) == filer_office ~ office_last_name,
TRUE ~ str_squish(str_extract(filer_office, "^[^\\s]+"))
)) %>%
mutate(office_last_name = case_when(
gsub(" ", "", filer_office) == filer_office ~ office_first_name,
TRUE ~ str_squish(str_extract(filer_office, "\\s(.*)"))
))
clean_2008 <- cleaned_filings_most %>%
filter(year(source) == 2008) %>%
mutate(office_last_name = case_when(
gsub(" ", "", filer_office) == filer_office ~ office_last_name,
TRUE ~ str_squish(str_extract(filer_office, "^[^\\s]+"))
)) %>%
mutate(office_first_name = case_when(
gsub(" ", "", filer_office) == filer_office ~ office_first_name,
TRUE ~ str_squish(str_extract(filer_office, "\\s(.*)"))
))
View(senators_clean)
clean_2008 <- cleaned_filings_most %>%
filter(year(source) == 2008) %>%
mutate(office_last_name = case_when(
gsub(" ", "", filer_office) == filer_office ~ office_last_name,
TRUE ~ str_squish(str_extract(filer_office, "^[^\\s]+"))
)) %>%
mutate(office_firstname = case_when(
gsub(" ", "", filer_office) == filer_office ~ office_firstname,
TRUE ~ str_squish(str_extract(filer_office, "\\s(.*)"))
)) %>%
mutate(office_first_name = case_when(
str_detect(office_firstname, " ") ~ str_squish(str_extract(filer_office, "^[^\\s]+")),
TRUE ~ office_firstname
))
clean_2008 <- cleaned_filings_most %>%
filter(year(source) == 2008) %>%
mutate(office_last_name = case_when(
gsub(" ", "", filer_office) == filer_office ~ office_last_name,
TRUE ~ str_squish(str_extract(filer_office, "^[^\\s]+"))
)) %>%
mutate(office_firstname = case_when(
gsub(" ", "", filer_office) == filer_office ~ office_first_name,
TRUE ~ str_squish(str_extract(filer_office, "\\s(.*)"))
)) %>%
mutate(office_first_name = case_when(
str_detect(office_firstname, " ") ~ str_squish(str_extract(office_firstname, "^[^\\s]+")),
TRUE ~ office_firstname
))
clean_2008 <- cleaned_filings_most %>%
filter(year(source) == 2008) %>%
mutate(office_last_name = case_when(
gsub(" ", "", filer_office) == filer_office ~ office_last_name,
TRUE ~ str_squish(str_extract(filer_office, "^[^\\s]+"))
)) %>%
mutate(office_firstname = case_when(
gsub(" ", "", filer_office) == filer_office ~ office_first_name,
TRUE ~ str_squish(str_extract(filer_office, "\\s(.*)"))
)) %>%
mutate(office_first_name = case_when(
str_detect(office_firstname, " ") ~ str_squish(str_extract(office_firstname, "^[^\\s]+")),
TRUE ~ office_firstname
)) %>%
mutate(office_middle_name = case_when(
str_detect(office_firstname, " ") ~ str_squish(str_extract(office_firstname, "^[^\\s]+")),
TRUE ~ office_middle_name
))
clean_2008 <- cleaned_filings_most %>%
filter(year(source) == 2008) %>%
mutate(office_last_name = case_when(
gsub(" ", "", filer_office) == filer_office ~ office_last_name,
TRUE ~ str_squish(str_extract(filer_office, "^[^\\s]+"))
)) %>%
mutate(office_firstname = case_when(
gsub(" ", "", filer_office) == filer_office ~ office_first_name,
TRUE ~ str_squish(str_extract(filer_office, "\\s(.*)"))
)) %>%
mutate(office_first_name = case_when(
str_detect(office_firstname, " ") ~ str_squish(str_extract(office_firstname, "^[^\\s]+")),
TRUE ~ office_firstname
)) %>%
mutate(office_middle_name = case_when(
str_detect(office_firstname, " ") ~ str_squish(str_extract(office_firstname, "\\s(.*)")),
TRUE ~ office_middle_name
))
clean_2008 <- cleaned_filings_most %>%
filter(year(source) == 2008) %>%
mutate(office_last_name = case_when(
gsub(" ", "", filer_office) == filer_office ~ office_last_name,
TRUE ~ str_squish(str_extract(filer_office, "^[^\\s]+"))
)) %>%
mutate(office_firstname = case_when(
gsub(" ", "", filer_office) == filer_office ~ office_first_name,
TRUE ~ str_squish(str_extract(filer_office, "\\s(.*)"))
)) %>%
mutate(office_first_name = case_when(
str_detect(office_firstname, " ") ~ str_squish(str_extract(office_firstname, "^[^\\s]+")),
TRUE ~ office_firstname
)) %>%
mutate(office_middle_name = case_when(
str_detect(office_firstname, " ") ~ str_squish(str_extract(office_firstname, "\\s(.*)")),
TRUE ~ office_middle_name
)) %>%
select(filer_lastname, filer_firstname, filer_office, office_first_name, office_middle_name, office_last_name, report_title, reporting_year, begin_travel_date, end_travel_date, date_received, transaction_date, num_pages, doc_url, source)
cleaned_filings <- cleaned_filings_most %>%
filter(!year(source) == 2008) %>%
bind_rows(clean_2008)
View(cleaned_filings)
filings_and_senators_fj <- cleaned_filings %>%
left_join(senators_clean, by = c("office_last_name", "office_middle_name", "office_first_name"))
senators_clean_mini <- senators_clean %>%
select(id, congress, finitial_lname)
filings_and_senators_sj <- filings_and_senators_fj %>%
filter(is.na(congress)) %>%
select(-congress, -id) %>%
mutate(finitial_lname = paste0(substr(office_first_name, 1, 1), " ", office_last_name)) %>%
left_join(senators_clean_mini, by = "finitial_lname")
senate_clean_lname <- senators_clean %>%
select(id, congress, office_last_name)
filings_and_senators_tj <- filings_and_senators_sj %>%
filter(is.na(congress)) %>%
select(-congress, -id) %>%
left_join(senate_clean_lname, by = "office_last_name")
View(filings_and_senators_tj)
View(senators_clean)
all_senators <- map_dfr(c(106:118), senate_members)
ppc_api_key("yfwQJnKLugEVpq3ejDO4IACQ36IFtow9MXphxeJd", set_renv = TRUE)
all_senators <- map_dfr(c(106:118), senate_members)
senators_clean <- all_senators %>%
distinct(id, .keep_all = TRUE) %>%
mutate(office_first_name = stri_trans_general(toupper(first_name), "Latin-ASCII")) %>%
mutate(office_middle_name = stri_trans_general(gsub(".", "", toupper(middle_name), fixed = TRUE), "Latin-ASCII")) %>%
mutate(office_last_name = stri_trans_general(toupper(last_name), "Latin-ASCII")) %>%
select(id, office_first_name, office_middle_name, office_last_name, congress) %>%
mutate(finitial_lname = paste0(substr(office_first_name, 1, 1), " ", office_last_name))
View(senators_clean)
View(filings_and_senators_tj)
View(senators_clean)
all_senators <- map_dfr(c(105:118), senate_members)
all_senators <- map_dfr(c(106:118), senate_members)
all_senators <- map_dfr(c(107:118), senate_members)
all_senators <- map_dfr(c(105:118), senate_members)
senators_clean <- all_senators %>%
distinct(id, .keep_all = TRUE) %>%
mutate(office_first_name = stri_trans_general(toupper(first_name), "Latin-ASCII")) %>%
mutate(office_middle_name = stri_trans_general(gsub(".", "", toupper(middle_name), fixed = TRUE), "Latin-ASCII")) %>%
mutate(office_last_name = stri_trans_general(toupper(last_name), "Latin-ASCII")) %>%
select(id, office_first_name, office_middle_name, office_last_name, congress) %>%
mutate(finitial_lname = paste0(substr(office_first_name, 1, 1), " ", office_last_name))
View(all_senators)
all_senators <- map_dfr(c(107:118), senate_members)
senators_clean <- all_senators %>%
distinct(id, .keep_all = TRUE) %>%
mutate(office_first_name = stri_trans_general(toupper(first_name), "Latin-ASCII")) %>%
mutate(office_middle_name = stri_trans_general(gsub(".", "", toupper(middle_name), fixed = TRUE), "Latin-ASCII")) %>%
mutate(office_last_name = stri_trans_general(toupper(last_name), "Latin-ASCII")) %>%
select(id, office_first_name, office_middle_name, office_last_name, congress) %>%
mutate(finitial_lname = paste0(substr(office_first_name, 1, 1), " ", office_last_name))
clean_2008 <- cleaned_filings_most %>%
filter(year(source) == 2008|2011|2015) %>%
mutate(office_last_name = case_when(
gsub(" ", "", filer_office) == filer_office ~ office_last_name,
TRUE ~ str_squish(str_extract(filer_office, "^[^\\s]+"))
)) %>%
mutate(office_firstname = case_when(
gsub(" ", "", filer_office) == filer_office ~ office_first_name,
TRUE ~ str_squish(str_extract(filer_office, "\\s(.*)"))
)) %>%
mutate(office_first_name = case_when(
str_detect(office_firstname, " ") ~ str_squish(str_extract(office_firstname, "^[^\\s]+")),
TRUE ~ office_firstname
)) %>%
mutate(office_middle_name = case_when(
str_detect(office_firstname, " ") ~ str_squish(str_extract(office_firstname, "\\s(.*)")),
TRUE ~ office_middle_name
)) %>%
select(filer_lastname, filer_firstname, filer_office, office_first_name, office_middle_name, office_last_name, report_title, reporting_year, begin_travel_date, end_travel_date, date_received, transaction_date, num_pages, doc_url, source)
View(clean_2008)
clean_2008 <- cleaned_filings_most %>%
filter(year(source) == (2008|2011|2015)) %>%
mutate(office_last_name = case_when(
gsub(" ", "", filer_office) == filer_office ~ office_last_name,
TRUE ~ str_squish(str_extract(filer_office, "^[^\\s]+"))
)) %>%
mutate(office_firstname = case_when(
gsub(" ", "", filer_office) == filer_office ~ office_first_name,
TRUE ~ str_squish(str_extract(filer_office, "\\s(.*)"))
)) %>%
mutate(office_first_name = case_when(
str_detect(office_firstname, " ") ~ str_squish(str_extract(office_firstname, "^[^\\s]+")),
TRUE ~ office_firstname
)) %>%
mutate(office_middle_name = case_when(
str_detect(office_firstname, " ") ~ str_squish(str_extract(office_firstname, "\\s(.*)")),
TRUE ~ office_middle_name
)) %>%
select(filer_lastname, filer_firstname, filer_office, office_first_name, office_middle_name, office_last_name, report_title, reporting_year, begin_travel_date, end_travel_date, date_received, transaction_date, num_pages, doc_url, source)
clean_2008 <- cleaned_filings_most %>%
filter(year(source) == 2008 | year(source) == 2011 | year(source) == 2015) %>%
mutate(office_last_name = case_when(
gsub(" ", "", filer_office) == filer_office ~ office_last_name,
TRUE ~ str_squish(str_extract(filer_office, "^[^\\s]+"))
)) %>%
mutate(office_firstname = case_when(
gsub(" ", "", filer_office) == filer_office ~ office_first_name,
TRUE ~ str_squish(str_extract(filer_office, "\\s(.*)"))
)) %>%
mutate(office_first_name = case_when(
str_detect(office_firstname, " ") ~ str_squish(str_extract(office_firstname, "^[^\\s]+")),
TRUE ~ office_firstname
)) %>%
mutate(office_middle_name = case_when(
str_detect(office_firstname, " ") ~ str_squish(str_extract(office_firstname, "\\s(.*)")),
TRUE ~ office_middle_name
)) %>%
select(filer_lastname, filer_firstname, filer_office, office_first_name, office_middle_name, office_last_name, report_title, reporting_year, begin_travel_date, end_travel_date, date_received, transaction_date, num_pages, doc_url, source)
View(clean_2008)
cleaned_filings <- cleaned_filings_most %>%
filter(!(year(source) == 2008 | year(source) == 2011 | year(source) == 2015)) %>%
bind_rows(clean_2008)
filings_and_senators_fj <- cleaned_filings %>%
left_join(senators_clean, by = c("office_last_name", "office_middle_name", "office_first_name"))
senators_clean_mini <- senators_clean %>%
select(id, congress, finitial_lname)
filings_and_senators_sj <- filings_and_senators_fj %>%
filter(is.na(congress)) %>%
select(-congress, -id) %>%
mutate(finitial_lname = paste0(substr(office_first_name, 1, 1), " ", office_last_name)) %>%
left_join(senators_clean_mini, by = "finitial_lname")
senate_clean_lname <- senators_clean %>%
select(id, congress, office_last_name)
filings_and_senators_tj <- filings_and_senators_sj %>%
filter(is.na(congress)) %>%
select(-congress, -id) %>%
left_join(senate_clean_lname, by = "office_last_name")
View(filings_and_senators_tj)
clean_2008 <- cleaned_filings_most %>%
filter(!year(source) == 2023) %>%
mutate(office_last_name = case_when(
gsub(" ", "", filer_office) == filer_office ~ office_last_name,
TRUE ~ str_squish(str_extract(filer_office, "^[^\\s]+"))
)) %>%
mutate(office_firstname = case_when(
gsub(" ", "", filer_office) == filer_office ~ office_first_name,
TRUE ~ str_squish(str_extract(filer_office, "\\s(.*)"))
)) %>%
mutate(office_first_name = case_when(
str_detect(office_firstname, " ") ~ str_squish(str_extract(office_firstname, "^[^\\s]+")),
TRUE ~ office_firstname
)) %>%
mutate(office_middle_name = case_when(
str_detect(office_firstname, " ") ~ str_squish(str_extract(office_firstname, "\\s(.*)")),
TRUE ~ office_middle_name
)) %>%
select(filer_lastname, filer_firstname, filer_office, office_first_name, office_middle_name, office_last_name, report_title, reporting_year, begin_travel_date, end_travel_date, date_received, transaction_date, num_pages, doc_url, source)
cleaned_filings <- cleaned_filings_most %>%
filter(year(source) == 2023) %>%
bind_rows(clean_2008)
filings_and_senators_fj <- cleaned_filings %>%
left_join(senators_clean, by = c("office_last_name", "office_middle_name", "office_first_name"))
senators_clean_mini <- senators_clean %>%
select(id, congress, finitial_lname)
filings_and_senators_sj <- filings_and_senators_fj %>%
filter(is.na(congress)) %>%
select(-congress, -id) %>%
mutate(finitial_lname = paste0(substr(office_first_name, 1, 1), " ", office_last_name)) %>%
left_join(senators_clean_mini, by = "finitial_lname")
senate_clean_lname <- senators_clean %>%
select(id, congress, office_last_name)
filings_and_senators_tj <- filings_and_senators_sj %>%
filter(is.na(congress)) %>%
select(-congress, -id) %>%
left_join(senate_clean_lname, by = "office_last_name")
View(filings_and_senators_tj)
View(filings_and_senators_tj)
filings_with_bioid <- filings_and_senators_tj %>%
select(-finitial_lname)
senators_clean <- all_senators %>%
distinct(id, .keep_all = TRUE) %>%
mutate(office_first_name = stri_trans_general(toupper(first_name), "Latin-ASCII")) %>%
mutate(office_middle_name = stri_trans_general(gsub(".", "", toupper(middle_name), fixed = TRUE), "Latin-ASCII")) %>%
mutate(office_last_name = stri_trans_general(toupper(last_name), "Latin-ASCII"))
View(senators_clean)
senators_ppinfo <- all_senators %>%
select(id, title, date_of_birth, gender, party)
senators_ppinfo <- all_senators %>%
select(id, title, date_of_birth, gender, party, in_office)
View(senators_ppinfo)
senators_ppinfo <- all_senators %>%
distinct(id, .keep_all = TRUE) %>%
select(id, title, date_of_birth, gender, party, in_office)
senators_ppinfo <- all_senators %>%
select(id, title, date_of_birth, gender, party, in_office)
senators_ppinfo <- all_senators %>%
select(id, title, suffix, seniority, date_of_birth, gender, party)
filings_with_bioid <- filings_and_senators_tj %>%
select(-finitial_lname) %>%
left_join(senators_ppinfo, by = "id")
View(filings_with_bioid)
filings_with_bioid <- filings_and_senators_tj %>%
select(-finitial_lname) %>%
inner_join(senators_ppinfo, by = "id")
filter(!filter(is.na(congress))
all_filings_matches <- filings_and_senators_fj %>%
all_filings_matches <- filings_and_senators_fj %>%
filter(!is.na(congress))
all_filings_matches <- filings_and_senators_fj %>%
filter(!is.na(congress)) %>%
rbind(filings_and_senators_sj)
all_filings_matches <- filings_and_senators_fj %>%
filter(!is.na(congress)) %>%
rbind(filings_and_senators_sj) %>%
filter(!is.na(congress))
all_filings_matches <- filings_and_senators_fj %>%
filter(!is.na(congress)) %>%
rbind(filings_and_senators_sj) %>%
filter(!is.na(congress)) %>%
rbind(filings_and_senators_tj)
filings_and_senators_tj <- filings_and_senators_sj %>%
filter(is.na(congress)) %>%
select(-congress, -id) %>%
left_join(senate_clean_lname, by = "office_last_name")
filings_and_senators_sj <- filings_and_senators_fj %>%
filter(is.na(congress)) %>%
select(-congress, -id) %>%
mutate(finitial_lname = paste0(substr(office_first_name, 1, 1), " ", office_last_name)) %>%
left_join(senators_clean_mini, by = "finitial_lname")
senate_clean_lname <- senators_clean %>%
select(id, congress, office_last_name)
filings_and_senators_tj <- filings_and_senators_sj %>%
filter(is.na(congress)) %>%
select(-congress, -id) %>%
left_join(senate_clean_lname, by = "office_last_name")
filings_and_senators_tj <- filings_and_senators_sj %>%
filter(is.na(congress))
filings_and_senators_tj <- filings_and_senators_sj %>%
filter(is.na(congress)) %>%
select(-congress, -id)
View(senate_clean_lname)
distinct(senate_clean_lname, office_last_name, .keep_all = TRUE)
View(filings_and_senators_tj)
filings_and_senators_tj <- filings_and_senators_sj %>%
filter(is.na(congress)) %>%
select(-congress, -id)
View(filings_and_senators_tj)
tolnay_beck <- read_csv("../data/Bailey_Beck_lynching_list_8_1_2022.csv") %>%
as.data.frame()
#install.packages("here")
here::here()
library(tidyverse)
library(tidyr)
#install.packages("ggmap")
library(ggmap)
#register_google(key = "YOUR KEY HERE")
library(googlesheets4)
#install.packages("geosphere")
library(geosphere)
#install.packages("expss")
library(expss)
tolnay_beck <- read_csv("../data/Bailey_Beck_lynching_list_8_1_2022.csv") %>%
as.data.frame()
tolnay_beck <- janitor::clean_names(tolnay_beck)
#install.packages("here")
here::here()
library(tidyverse)
library(tidyr)
#install.packages("ggmap")
library(ggmap)
#register_google(key = "YOUR KEY HERE")
library(googlesheets4)
#install.packages("geosphere")
library(geosphere)
#install.packages("expss")
library(expss)
# Analyze broader dataset of all lynchings by decade and state and region. Want to see if our sample of lynchings by state is skewed. Total and percentage by state. Group in Regional categories. Next, calculate baseline totals of the newspapers in the states.
lynch_data <- read_csv("lynch_geocoded_9.27.csv")
setwd("~/Desktop/GitHub/Jour389L")
lynch_data <- read_csv("data/lynch_geocoded_9.27.csv")
setwd("~/Desktop/GitHub/Jour389L")
lynch_data <- read_csv("~/Desktop/GitHub/Jour389L/data/lynch_geocoded_9.27.csv")
View(lynch_data)
lynch_article data <- read_csv("~/Desktop/GitHub/Jour389L/data/lynch_geocoded_9.27.csv")
lynch_article_data <- read_csv("~/Desktop/GitHub/Jour389L/data/lynch_geocoded_9.27.csv")
View(lynch_article_data)
lynch_data <- lynch_article_data %>%
mutate(date = as.Date(date, "%m/%d/%Y"))
View(lynch_data)
View(lynch_data)
lynch_data <- lynch_article_data %>%
mutate(date = as.Date(date, "%m/%d/%Y")) %>%
distinct(year, lynch_address, .keep_all = TRUE)
View(lynch_data)
View(lynch_data)
lynch_by_state <- lynch_data %>%
group_by(state_lynch) %>%
count(.)
View(lynch_by_state)
lynch_by_state <- lynch_data %>%
group_by(state_lynch) %>%
count(.) %>%
mutate(percent_lynchings = n/nrow(lynch_data))
lynch_by_state <- lynch_data %>%
group_by(state_lynch) %>%
count(.) %>%
mutate(percent_lynchings = round(n/nrow(lynch_data)*100,2))
write_sheet(lynch_by_state, "https://docs.google.com/spreadsheets/d/1udiQCGe-Qou-WlAiBYJgW23AccOx-_4pNHKNjzIreXA/edit#gid=0")
install.packages("tigris")
ggplot() +
geom_sf(data=lynch_by_state, aes(fill=percent_lynchings, geometry = geometry)) +
theme_minimal() +
scale_fill_viridis_b(option="magma")
View(lynch_article_data)
tolnay_beck <- read_csv("../data/Bailey_Beck_lynching_list_8_1_2022.csv") %>%
as.data.frame()
tolnay_beck <- janitor::clean_names(tolnay_beck)
View(tolnay_beck)
# Analyze broader dataset of all lynchings by decade and state and region. Want to see if our sample of lynchings by state is skewed. Total and percentage by state. Group in Regional categories. Next, calculate baseline totals of the newspapers in the states.
tolnay_beck <- read_csv("../data/Bailey_Beck_lynching_list_8_1_2022.csv") %>%
as.data.frame()
tolnay_beck <- janitor::clean_names(tolnay_beck)
beck_by_state <- tolnay_beck %>%
filter(!str_detect(status, "death"))
View(beck_by_state)
beck_by_state <- tolnay_beck %>%
filter(!str_detect(status, "death")) %>%
group_by(lynch_state) %>%
count(.)
View(beck_by_state)
beck_by_state <- tolnay_beck %>%
filter(!str_detect(status, "death")) %>%
group_by(lynch_state) %>%
count(.) %>%
rename(state_lynch = lynch_state)
View(beck_by_state)
beck_lynchings <- tolnay_beck %>%
filter(!str_detect(status, "death"))
beck_by_state <- beck_lynchings %>%
group_by(lynch_state) %>%
count(.) %>%
rename(state_lynch = lynch_state) %>%
mutate(percent_lynchings_beck = n/nrow())
beck_by_state <- beck_lynchings %>%
group_by(lynch_state) %>%
count(.) %>%
rename(state_lynch = lynch_state) %>%
mutate(percent_lynchings_beck = round(n/nrow(beck_lynchings)*100,2))
beck_by_state <- beck_lynchings %>%
group_by(lynch_state) %>%
summarize(
beck_count = count(.)
) %>%
rename(state_lynch = lynch_state) %>%
mutate(percent_lynchings_beck = round(n/nrow(beck_lynchings)*100,2))
beck_by_state <- beck_lynchings %>%
group_by(lynch_state) %>%
summarize(
beck_count = count(.)
) %>%
rename(state_lynch = lynch_state) %>%
mutate(percent_lynchings_beck = round(beck_count/nrow(beck_lynchings)*100,2))
beck_by_state <- beck_lynchings %>%
group_by(lynch_state) %>%
summarize(
beck_count = count(.)
)
beck_by_state <- beck_lynchings %>%
group_by(lynch_state) %>%
summarize(
beck_count = count()
) %>%
rename(state_lynch = lynch_state) %>%
mutate(percent_lynchings_beck = round(beck_count/nrow(beck_lynchings)*100,2))
beck_by_state <- beck_lynchings %>%
group_by(lynch_state) %>%
summarize(
beck_count = count()
)
mutate(percent_lynchings_beck = round(beck_count/nrow(beck_lynchings)*100,2))
beck_by_state <- beck_lynchings %>%
group_by(lynch_state) %>%
count(.) %>%
rename(state_lynch = lynch_state) %>%
rename(beck_count = n) %>%
mutate(percent_lynchings_beck = round(beck_count/nrow(beck_lynchings)*100,2))
# Percent of all lynchings that are in each state
lynch_by_state <- lynch_data %>%
group_by(state_lynch) %>%
count(.) %>%
rename(input_count = n)
# Percent of all lynchings that are in each state
lynch_by_state <- lynch_data %>%
group_by(state_lynch) %>%
count(.) %>%
rename(input_count = n) %>%
mutate(percent_lynchings_input = round(input_count/nrow(lynch_data)*100,2))
state_lynchings_compare <- lynch_data %>%
left_join(beck_by_state, by = "state_lynch")
write_sheet(state_lynchings_compare, "https://docs.google.com/spreadsheets/d/1udiQCGe-Qou-WlAiBYJgW23AccOx-_4pNHKNjzIreXA/edit#gid=0")
state_lynchings_compare <- lynch_by_state %>%
left_join(beck_by_state, by = "state_lynch")
write_sheet(state_lynchings_compare, "https://docs.google.com/spreadsheets/d/1udiQCGe-Qou-WlAiBYJgW23AccOx-_4pNHKNjzIreXA/edit#gid=0")
write_sheet(state_lynchings_compare, "https://docs.google.com/spreadsheets/d/1udiQCGe-Qou-WlAiBYJgW23AccOx-_4pNHKNjzIreXA/edit#gid=0")
state_lynchings_compare <- lynch_by_state %>%
left_join(beck_by_state, by = "state_lynch") %>%
mutate(beck_input_dif = percent_lynchings_beck-percent_lynchings_input)
View(state_lynchings_compare)
write_sheet(state_lynchings_compare, "https://docs.google.com/spreadsheets/d/1udiQCGe-Qou-WlAiBYJgW23AccOx-_4pNHKNjzIreXA/edit#gid=0", sheet = "state_lynchings_compare")
View(tolnay_beck)
View(beck_lynchings)
