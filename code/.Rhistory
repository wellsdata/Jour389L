count(.) %>%
rename(input_count = n) %>%
mutate(percent_lynchings_input = round(input_count/nrow(lynch_data)*100,2))
View(lynch_by_state)
lynch_data1 <- lynch_article_data %>%
mutate(date = as.Date(date, "%m/%d/%Y"))
lynch_by_state1 <- lynch_data1 %>%
group_by(state_lynch) %>%
count(.) %>%
rename(input_count = n) %>%
mutate(percent_lynchings_input = round(input_count/nrow(lynch_data)*100,2))
View(lynch_by_state1)
View(beck_by_state)
View(lynch_data1)
x <- lynch_data1 %>%
count(file_id) %>%
arrange(desc(n))
View(x)
View(lynch_data)
state_lynchings_compare <- lynch_by_state %>%
left_join(beck_by_state, by = "state_lynch") %>%
mutate(beck_input_dif = percent_lynchings_beck-percent_lynchings_input)
state1_lynchings_compare <- lynch_by_state1 %>%
left_join(beck_by_state, by = "state_lynch") %>%
mutate(beck_input_dif = percent_lynchings_beck-percent_lynchings_input)
View(state1_lynchings_compare)
View(state_lynchings_compare)
8.99-6.55
View(beck_lynchings)
lynch_data1 <- lynch_article_data %>%
mutate(date = as.Date(date, "%m/%d/%Y")) %>%
mutate(yearmo = ym(date)
View(lynch_data1)
lynch_data1 <- lynch_article_data %>%
mutate(date = as.Date(date, "%m/%d/%Y")) %>%
mutate(yearmo = ym(date) %>%
distinct(yearmo, lynch_address, .keep_all=TRUE)
View(lynch_data1)
names(lynch_data1)
lynch_data1 <- lynch_article_data %>%
mutate(date = as.Date(date, "%m/%d/%Y")) %>%
mutate(yearmo = ym(date)
)
lynch_data1 <- lynch_article_data %>%
mutate(date = as.Date(date, "%m/%d/%Y")) %>%
mutate(yearmo = zoo::as.yearmon(date)))
lynch_data1 <- lynch_article_data %>%
mutate(date = as.Date(date, "%m/%d/%Y")) %>%
mutate(yearmo = zoo::as.yearmon(date))
glimpse(lynch_data1)
lynch_data1 <- lynch_article_data %>%
mutate(date = as.Date(date, "%m/%d/%Y")) %>%
mutate(yearmo = zoo::as.yearmon(date)) %>%
distinct(yearmo, lynch_address, .keep_all=TRUE)
2786-2349
lynch_geocoded_9.27 <- read.csv("../data/lynch_geocoded_9.27.csv")
View(lynch_geocoded_9.27)
#Classification based on https://www.census.gov/programs-surveys/economic-census/guidance-geographies/levels.html#par_textimage_34
lynch_geocoded_9.27 <- lynch_geocoded_9.27 %>%
mutate(Newspaper_Region2 = case_when(Newspaper_State=="South Carolina" ~ "South",
Newspaper_State=="Texas" ~ "South",
Newspaper_State=="Louisiana" ~ "South",
Newspaper_State=="Tennessee" ~ "South",
Newspaper_State=="Mississippi" ~ "South",
Newspaper_State=="Arkansas" ~ "South",
Newspaper_State=="Alabama" ~ "South","Northeast"
Newspaper_State=="Georgia" ~ "South",
#Classification based on https://www.census.gov/programs-surveys/economic-census/guidance-geographies/levels.html#par_textimage_34
lynch_geocoded_9.27 <- lynch_geocoded_9.27 %>%
mutate(Newspaper_Region2=Newspaper_State) %>%
mutate(Newspaper_Region2 = case_when(Newspaper_State=="South Carolina" ~ "South",
Newspaper_State=="Texas" ~ "South",
Newspaper_State=="Louisiana" ~ "South",
Newspaper_State=="Tennessee" ~ "South",
Newspaper_State=="Mississippi" ~ "South",
Newspaper_State=="Arkansas" ~ "South",
Newspaper_State=="Alabama" ~ "South","Northeast"
Newspaper_State=="Georgia" ~ "South",
#Classification based on https://www.census.gov/programs-surveys/economic-census/guidance-geographies/levels.html#par_textimage_34
lynch_geocoded_9.27 <- lynch_geocoded_9.27 %>%
mutate(Newspaper_Region2=Newspaper_State) %>%
mutate(Newspaper_Region2 = case_when(Newspaper_State=="South Carolina" ~ "South",
Newspaper_State=="Texas" ~ "South",
Newspaper_State=="Louisiana" ~ "South",
Newspaper_State=="Tennessee" ~ "South",
Newspaper_State=="Mississippi" ~ "South",
Newspaper_State=="Arkansas" ~ "South",
Newspaper_State=="Alabama" ~ "South",
Newspaper_State=="Georgia" ~ "South",
Newspaper_State=="Virginia" ~ "South",
Newspaper_State=="Florida" ~ "South",
Newspaper_State=="North Carolina" ~ "South",
Newspaper_State=="Maryland" ~ "South",
Newspaper_State=="Delaware" ~ "South",
Newspaper_State=="West Virginia" ~ "South",
Newspaper_State=="Kentucky" ~ "South",
Newspaper_State=="Missouri" ~ "Midwest",
Newspaper_State=="Maine" ~ "Northeast",
Newspaper_State=="New York" ~ "Northeast",
Newspaper_State=="New Hampshire" ~ "Northeast",
Newspaper_State=="Vermont" ~ "Northeast",
Newspaper_State=="Massachusetts" ~ "Northeast",
Newspaper_State=="Connecticut" ~ "Northeast",
Newspaper_State=="Rhode Island" ~ "Northeast",
Newspaper_State=="Pennsylvania" ~ "Northeast",
Newspaper_State=="New Jersey" ~ "Northeast",
Newspaper_State=="Ohio" ~ "Midwest",
Newspaper_State=="Indiana" ~ "Midwest",
Newspaper_State=="Kansas" ~ "Midwest",
Newspaper_State=="Michigan" ~ "Midwest",
Newspaper_State=="Wisconsin" ~ "Midwest",
Newspaper_State=="Minnesota" ~ "Midwest",
Newspaper_State=="Iowa" ~ "Midwest",
Newspaper_State=="California" ~ "West",
Newspaper_State=="Nevada" ~ "West",
Newspaper_State=="Oregon" ~ "West",
Newspaper_State=="Illinois" ~ "Midwest",
Newspaper_State=="Nebraska" ~ "Midwest",
Newspaper_State=="Colorado" ~ "West",
Newspaper_State=="North Dakota" ~ "Midwest",
Newspaper_State=="South Dakota" ~ "Midwest",
Newspaper_State=="Montana" ~ "West",
Newspaper_State=="Washington" ~ "West",
Newspaper_State=="Idaho" ~ "West",
Newspaper_State=="Wyoming" ~ "West",
Newspaper_State=="Utah" ~ "West",
Newspaper_State=="Oklahoma" ~ "South",
Newspaper_State=="New Mexico" ~ "West",
Newspaper_State=="Arizona" ~ "West",
Newspaper_State=="Alaska" ~ "West",
Newspaper_State=="Hawaii" ~ "West",
Newspaper_State=="District of Columbia" ~ "South",
Newspaper_State=="Virgin Islands" ~ "Misc",
TRUE~Newspaper_State))
#write.csv(lynch_geocoded_9.27, "../data/lynch_geocoded_9.27.csv")
#Classification based on https://www.census.gov/programs-surveys/economic-census/guidance-geographies/levels.html#par_textimage_34
lynch_geocoded_9.27 <- lynch_geocoded_9.27 %>%
mutate(Newspaper_Region=Newspaper_State) %>%
mutate(Newspaper_Region = case_when(Newspaper_State=="South Carolina" ~ "South",
Newspaper_State=="Texas" ~ "South",
Newspaper_State=="Louisiana" ~ "South",
Newspaper_State=="Tennessee" ~ "South",
Newspaper_State=="Mississippi" ~ "South",
Newspaper_State=="Arkansas" ~ "South",
Newspaper_State=="Alabama" ~ "South",
Newspaper_State=="Georgia" ~ "South",
Newspaper_State=="Virginia" ~ "South",
Newspaper_State=="Florida" ~ "South",
Newspaper_State=="North Carolina" ~ "South",
Newspaper_State=="Maryland" ~ "South",
Newspaper_State=="Delaware" ~ "South",
Newspaper_State=="West Virginia" ~ "South",
Newspaper_State=="Kentucky" ~ "South",
Newspaper_State=="Missouri" ~ "Midwest",
Newspaper_State=="Maine" ~ "Northeast",
Newspaper_State=="New York" ~ "Northeast",
Newspaper_State=="New Hampshire" ~ "Northeast",
Newspaper_State=="Vermont" ~ "Northeast",
Newspaper_State=="Massachusetts" ~ "Northeast",
Newspaper_State=="Connecticut" ~ "Northeast",
Newspaper_State=="Rhode Island" ~ "Northeast",
Newspaper_State=="Pennsylvania" ~ "Northeast",
Newspaper_State=="New Jersey" ~ "Northeast",
Newspaper_State=="Ohio" ~ "Midwest",
Newspaper_State=="Indiana" ~ "Midwest",
Newspaper_State=="Kansas" ~ "Midwest",
Newspaper_State=="Michigan" ~ "Midwest",
Newspaper_State=="Wisconsin" ~ "Midwest",
Newspaper_State=="Minnesota" ~ "Midwest",
Newspaper_State=="Iowa" ~ "Midwest",
Newspaper_State=="California" ~ "West",
Newspaper_State=="Nevada" ~ "West",
Newspaper_State=="Oregon" ~ "West",
Newspaper_State=="Illinois" ~ "Midwest",
Newspaper_State=="Nebraska" ~ "Midwest",
Newspaper_State=="Colorado" ~ "West",
Newspaper_State=="North Dakota" ~ "Midwest",
Newspaper_State=="South Dakota" ~ "Midwest",
Newspaper_State=="Montana" ~ "West",
Newspaper_State=="Washington" ~ "West",
Newspaper_State=="Idaho" ~ "West",
Newspaper_State=="Wyoming" ~ "West",
Newspaper_State=="Utah" ~ "West",
Newspaper_State=="Oklahoma" ~ "South",
Newspaper_State=="New Mexico" ~ "West",
Newspaper_State=="Arizona" ~ "West",
Newspaper_State=="Alaska" ~ "West",
Newspaper_State=="Hawaii" ~ "West",
Newspaper_State=="District of Columbia" ~ "South",
Newspaper_State=="Virgin Islands" ~ "Misc",
TRUE~Newspaper_State))
#write.csv(lynch_geocoded_9.27, "../data/lynch_geocoded_9.27.csv")
lynch_geocoded_9.27 <- subset(lynch_geocoded_9.27, select =-Newspaper_Region2)
lynch_geocoded_9.27 <- lynch_geocoded_9.27 %>%
mutate(Border = case_when(Newspaper_State=="Maryland" ~ "Border",
Newspaper_State=="Delaware" ~ "Border",
Newspaper_State=="West Virginia" ~ "Border",
Newspaper_State=="Kentucky" ~ "Border",
Newspaper_State=="Missouri" ~ "Border",
.default = "Not_Border"))
write.csv(lynch_geocoded_9.27, "../data/lynch_geocoded_9.27.csv")
View(beck_lynchings)
names(beck_lynchings)
beck_by_state <- beck_lynchings %>%
group_by(lynch_state) %>%
count(.) %>%
rename(state_lynch = lynch_state) %>%
rename(beck_count = n) %>%
mutate(percent_lynchings_beck = round(beck_count/nrow(beck_lynchings)*100,2))
View(beck_by_state)
sum(beck_by_state$beck_count)
sum(beck_by_state$percent_lynching_beck)
sum(beck_by_state$percent_lynchings_beck)
state_lynchings_compare <- lynch_by_state %>%
left_join(beck_by_state, by = "state_lynch") %>%
mutate(beck_input_dif = percent_lynchings_beck-percent_lynchings_input)
View(state_lynchings_compare)
beck_region_coded <- beck_lynchings %>%
select(status, lynch_state) %>%
mutate(lynch_region = case_when(
str_detect(lynch_state, "SC|TX|LA|TN|MS|AR|AL|GA|VA|FL|NC") ~ "south",
str_detect(lynch_state, "MD|DE|WV|KY|MO") ~ "border",
str_detect(lynch_state, "ME|NY|NH|VT|MA|CT|RI|PA|NJ|OH|IN|KS|MI|WI|MN|IA|CA|NV|OR|IL") ~ "north",
str_detect(lynch_state, "NE|CO|ND|SD|MT|WA|ID|WY|UT|OK|NM|AZ|AK|HI") ~ "misc",
TRUE~lynch_state
))
View(beck_region_coded)
lynch_cleaned <- lynch_data %>%
clean_names() %>%
mutate(newspaper_region2 = tolower(newspaper_region2))
lynch_by_region <- lynch_cleaned %>%
group_by(newspaper_region2) %>%
count(.) %>%
rename(input_count = n) %>%
mutate(percent_lynchings_input = round(input_count/nrow(lynch_data)*100,2))
View(lynch_by_region)
View(lynch_cleaned)
beck_by_region <- beck_region_coded %>%
group_by(lynch_region) %>%
count(.) %>%
rename(beck_count = n) %>%
mutate(percent_lynchings_beck = round(beck_count/nrow(beck_region_coded)*100,2))
View(beck_by_region)
regional_comparison <- lynch_by_region %>%
left_join(beck_by_region, by = c("newspaper_region2" = "lynch_region")) %>%
mutate(beck_input_dif = percent_lynchings_beck-percent_lynchings_input)
View(regional_comparison)
View(beck_lynchings)
View(beck_by_state)
View(beck_lynchings)
newspaper_list <- lynch_article_data %>%
distinct(newspaper_name, news_address, .keep_all = TRUE)
paper_count_by_state <- newspaper_list %>%
group_by(Newspaper_State) %>%
count(.) %>%
rename(count_papers = n) %>%
mutate(percent_papers = round(count_papers/nrow(newspaper_list)*100,2))
View(paper_count_by_state)
paper_count_by_region <- newspaper_list %>%
group_by(Newspaper_Region2) %>%
count(.) %>%
rename(count_papers = n) %>%
mutate(percent_papers = round(count_papers/nrow(newspaper_list)*100,2))
View(paper_count_by_region)
View(state_lynchings_compare)
View(beck_lynchings)
count(beck_lynchings$status)
summarize(beck_lynchings$status)
beck_lynchings %>%
group_by(status) %>%
count(.)
View(lynch_geocoded_9.27)
write.csv(lynch_geocoded_9.27, "../data/lynch_geocoded_9.27.csv")
library(scales)
install.packages('scales')
install.packages("scales")
library(scales)
#install.packages("here")
#here::here()
library(tidyverse)
library(tidyr)
#install.packages("ggmap")
library(ggmap)
#install.packages("geosphere")
library(geosphere)
library(janitor)
#install.packages('scales')
library(scales)
lynching_data_distinct <- lynching_data %>%
distinct()
lynching_data <- read.csv("data/lynch_geocoded_9.16.csv")
lynching_data_distinct <- lynching_data %>%
distinct()
View(lynching_data_distinct)
starter_code <- lynching_data %>%
select(decade, Newspaper_Region, in_state) %>%
group_by(Newspaper_Region) %>%
count(in_state)
View(starter_code)
geography_starter_df <- lynching_data %>%
clean_names() %>%
select(newspaper_name1, newspaper_state_code, state_lynch, newspaper_region, in_state, year, decade, lynching_lon, lynching_lat, news_location_lon, news_location_lat)
geography_starter_df %>%
group_by(year) %>%
summarise(total_count = n()) %>%
arrange(desc(total_count))
geography_starter_df %>%
filter(newspaper_region == "South") %>%
group_by(year) %>%
summarise(southern_count = n()) %>%
arrange(desc(southern_count))
south_count_over_time <- geography_starter_df %>%
filter(newspaper_region == "South") %>%
group_by(decade) %>%
summarise(southern_count = n()) %>%
arrange(desc(southern_count))
View(south_count_over_time)
north_count_over_time <- geography_starter_df %>%
filter(newspaper_region == "North Central" | newspaper_region == "Northeast") %>%
group_by(decade) %>%
summarise(northern_count = n()) %>%
arrange(desc(northern_count))
west_count_over_time <- geography_starter_df %>%
filter(newspaper_region == "West") %>%
group_by(decade) %>%
summarise(western_count = n()) %>%
arrange(desc(western_count))
overall_count_over_time <- geography_starter_df %>%
group_by(decade) %>%
summarise(total_count = n()) %>%
arrange(desc(total_count))
lynching_geog_over_time <- overall_count_over_time %>% left_join(south_count_over_time, by="decade")
lynching_geog_over_time <- lynching_geog_over_time %>% left_join(north_count_over_time, by='decade')
lynching_geog_over_time <- lynching_geog_over_time %>% left_join(west_count_over_time, by='decade')
View(lynching_geog_over_time)
267+569+148
coverage_occurrences_states <- geography_starter_df %>%
group_by(newspaper_state_code) %>%
summarise(coverage_count = n()) %>%
arrange(desc(coverage_count))
View(coverage_occurrences_states)
lyching_occurrences_states <- geography_starter_df %>%
group_by(state_lynch) %>%
summarise(lynching_count = n()) %>%
arrange(desc(lynching_count))
View(lyching_occurrences_states)
coverage_vs_lynch_occurrence <- left_join(coverage_occurrences_states, lyching_occurrences_states, by=c('newspaper_state_code'='state_lynch'))
View(coverage_vs_lynch_occurrence)
lynching_data <- read.csv("data/lynch_geocoded_9.27.csv")
# vibe check
lynching_data %>%
head(10)
#check for duplicate rows
lynching_data_distinct <- lynching_data %>%
distinct()
#all good
## Regional differences
#starter code
starter_code <- lynching_data %>%
select(decade, Newspaper_Region, in_state) %>%
group_by(Newspaper_Region) %>%
count(in_state)
write_csv(starter_code, "in_out_of_state_breakdown.csv")
# starter code takeaways
# - northeast only covered one in-state lynching but reported on 222 out of state ones
# - north central region had overwhelmingly the most out of state lynching coverage, which make sense because these states are close to the south in proximity, and therefore it makes sense to cover things, but 1384 out of state vs. 55 in state is crazy
# let's clean up this dataframe
geography_starter_df <- lynching_data %>%
clean_names() %>%
select(newspaper_name1, newspaper_state_code, state_lynch, newspaper_region, in_state, year, decade, lynching_lon, lynching_lat, news_location_lon, news_location_lat)
geography_starter_df <- lynching_data %>%
clean_names() %>%
select(newspaper_name, newspaper_state_code, state_lynch, newspaper_region, in_state, year, decade, lynching_lon, lynching_lat, news_location_lon, news_location_lat)
geography_starter_df %>%
group_by(year) %>%
summarise(total_count = n()) %>%
arrange(desc(total_count))
geography_starter_df %>%
filter(newspaper_region == "South") %>%
group_by(year) %>%
summarise(southern_count = n()) %>%
arrange(desc(southern_count))
# same thing just zooming out for decades -- let's use decades for this preliminary vibe check
south_count_over_time <- geography_starter_df %>%
filter(newspaper_region == "South") %>%
group_by(decade) %>%
summarise(southern_count = n()) %>%
arrange(desc(southern_count))
north_count_over_time <- geography_starter_df %>%
filter(newspaper_region == "North Central" | newspaper_region == "Northeast") %>%
group_by(decade) %>%
summarise(northern_count = n()) %>%
arrange(desc(northern_count))
west_count_over_time <- geography_starter_df %>%
filter(newspaper_region == "West") %>%
group_by(decade) %>%
summarise(western_count = n()) %>%
arrange(desc(western_count))
overall_count_over_time <- geography_starter_df %>%
group_by(decade) %>%
summarise(total_count = n()) %>%
arrange(desc(total_count))
lynching_geog_over_time <- overall_count_over_time %>% left_join(south_count_over_time, by="decade")
lynching_geog_over_time <- lynching_geog_over_time %>% left_join(north_count_over_time, by='decade')
lynching_geog_over_time <- lynching_geog_over_time %>% left_join(west_count_over_time, by='decade')
write_csv(lynching_geog_over_time, "lynching_regional_decades.csv")
# in what state did the most lynching take place?
# in what state was lynching covered the most?
coverage_occurrences_states <- geography_starter_df %>%
group_by(newspaper_state_code) %>%
summarise(coverage_count = n()) %>%
arrange(desc(coverage_count))
lyching_occurrences_states <- geography_starter_df %>%
group_by(state_lynch) %>%
summarise(lynching_count = n()) %>%
arrange(desc(lynching_count))
# the top 5 states where the most lynchings occurred were georgia, tennessee, mississippi, kentucky, alabama and texas
# the top 5 states where the most lynchings were covered were wisconsin, missouri, kansas, ohio, south dakota and north dakota
coverage_vs_lynch_occurrence <- left_join(coverage_occurrences_states, lyching_occurrences_states, by=c('newspaper_state_code'='state_lynch'))
state_in_out_breakdown <- lynch_updated %>%
select(decade, newspaper_state, in_state) %>%
group_by(newspaper_state) %>%
count(in_state)
lynch_updated <- read_csv("data/lynch_geocoded_9.27.csv")
lynch_updated <- lynch_updated %>%
clean_names()
state_in_out_breakdown <- lynch_updated %>%
select(decade, newspaper_state, in_state) %>%
group_by(newspaper_state) %>%
count(in_state)
View(state_in_out_breakdown)
out_of_state_coverage <- state_in_out_breakdown %>%
filter(in_state == "N") %>%
arrange(desc(n))
View(out_of_state_coverage)
states_df <- lynch_updated %>%
select(newspaper_name, newspaper_state_code, state_lynch, in_state)
oos_coverage <- states_df %>%
filter(in_state == "N") %>%
group_by(state_lynch) %>%
count(in_state)
View(oos_coverage)
newspapers_oos <- states_df %>%
filter(in_state == "N") %>%
group_by(newspaper_name) %>%
summarize(count = n()) %>%
arrange(desc(count))
View(newspapers_oos)
states_with_years <- lynch_updated %>%
select(decade, newspaper_state_code, state_lynch, in_state, newspaper_name)
View(states_with_years)
is <- states_with_years %>%
filter(in_state == "Y") %>%
group_by(decade) %>%
summarise(in_state = n())
oos <- states_with_years %>%
filter(in_state == "N") %>%
group_by(decade) %>%
summarise(out_of_state = n())
coverage_by_decade <- is %>% left_join(oos, by='decade')
View(coverage_by_decade)
22+53+18+46+42+31+22+27
261/3
22+53
22+53+18
31+22+27
library(tidyverse)
library(textdata)
library(tidytext)
library(quanteda)
library(rio)
jackindex_geo <- read_csv("../data/extracted_articles_aug25.csv")
View(jackindex_geo)
View(lynch_geocoded_9.27)
lynch <- read_csv("../data/articles_aug_25.csv")
x <- stringi::stri_count_words(lynch$sentence, "\\w+") %>%
as.data.frame() %>%
rename(words = ".")
lynch <- cbind(lynch, x)
y <- lynch %>%
select(filename, sentence, words, year)
# append decade information for aggregation
y$decade <- paste0(substr(y$year, 0, 3), "0")
z <- y %>%
select(filename, words, decade) %>%
group_by(filename, decade) %>%
summarize(total=sum(words))
#Count by decade, filter off 1960 as noise
lynch_word_decade <- z %>%
select(decade, total) %>%
group_by(decade) %>%
summarize(avg_words=mean(total, na.rm=TRUE)) %>%
mutate(avg_words = round(avg_words, 0)) %>%
filter(!decade==1960)
View(lynch_word_decade)
View(x)
View(lynch)
View(z)
z <- y %>%
select(filename, newspaper_name, URL, words, decade) %>%
group_by(filename, decade) %>%
summarize(total=sum(words))
View(y)
y <- lynch %>%
select(filename, sentence, words, year, newspaper_name, URL)
# append decade information for aggregation
y$decade <- paste0(substr(y$year, 0, 3), "0")
z <- y %>%
select(filename, newspaper_name, URL, words, decade) %>%
group_by(filename, decade) %>%
summarize(total=sum(words))
View(y)
